<!DOCTYPE html>
<html lang="en-us">

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>
    
      About preparing labels for lego collection &middot; Blog #42
    
  </title>

  <!-- CSS -->
  <link rel="stylesheet" href="/blog/css/poole.css">
  <link rel="stylesheet" href="/blog/css/github-gist.css">
  <link rel="stylesheet" href="/blog/css/lanyon.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Serif:400,400italic,700%7CPT+Sans:400">

  <!-- Icons -->
    <!-- generics -->
    <link rel="icon" href="/blog/favicon-32.png" sizes="32x32">
    <link rel="icon" href="/blog/favicon-57.png" sizes="57x57">
    <link rel="icon" href="/blog/favicon-76.png" sizes="76x76">
    <link rel="icon" href="/blog/favicon-96.png" sizes="96x96">
    <link rel="icon" href="/blog/favicon-128.png" sizes="128x128">
    <link rel="icon" href="/blog/favicon-192.png" sizes="192x192">
    <link rel="icon" href="/blog/favicon-228.png" sizes="228x228">

    <!-- Android -->
    <link rel="shortcut icon" sizes="196x196" href=â€œ/blog/favicon-196.png">

    <!-- iOS -->
    <link rel="apple-touch-icon" href="/blog/favicon-120.png" sizes="120x120">
    <link rel="apple-touch-icon" href="/blog/favicon-152.png" sizes="152x152">
    <link rel="apple-touch-icon" href="/blog/favicon-180.png" sizes="180x180">

    <!-- Windows 8 IE 10-->
    <meta name="msapplication-TileColor" content="#FFFFFF">
    <meta name="msapplication-TileImage" content="/blog/favicon-144.png">



    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.0.3/highlight.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.0.3/languages/twig.min.js"></script>

    <script>hljs.initHighlightingOnLoad();</script>
</head>


  <body>
    <input type="checkbox" class="sidebar-checkbox" id="sidebar-checkbox">

<!-- Toggleable sidebar -->
<div class="sidebar" id="sidebar">
  <div class="sidebar-item">
    <p>I am still not sure if this gonna fly or what I end up putting here</p>
  </div>

  <nav class="sidebar-nav">
    <a class="sidebar-nav-item" href="/blog/">Home</a>

    
      <a class="sidebar-nav-item" href="/blog/tags.md">Tags</a>
    
      <a class="sidebar-nav-item" href="/blog/components.md">Components</a>
    

    <a class="sidebar-nav-item" href="https://github.com/soswow/blog">GitHub project</a>
  </nav>

  <div class="sidebar-item">
    <p>
      &copy; 2020. All rights reserved.
    </p>
  </div>
</div>

    <!-- Wrap is the content to shift when toggling the sidebar. We wrap the
         content to avoid any CSS collisions with our real content. -->
    <div class="wrap">
      <div class="masthead">
        <div class="container">
          <h3 class="masthead-title">
            <a href="/blog" title="Home">Blog #42</a>
            <small>Notes to future me</small>
          </h3>
        </div>
      </div>

      <div class="container content">
        
<div class="post">
    <h1 class="post-title">About preparing labels for lego collection</h1>
    <span class="post-date">07.06.2020 | <a href="#disqus_thread">Link</a></span>
    <h2 id="background">Background</h2>
<p>Over time we&#39;ve collected a reasonable collection of lego parts. An initial big boost was given by my oldest brother who gave us his grown up son&#39;s collection. When we moved to Australia we left it behind, prepared in a suitcase. A bit later an acquaintance agreed to take it with him on his way to Australia. Pro Tip: if you ask a 2x person to carry 23kg of lego in a second separate suitcase think what you will say on a border because 100% this will look suspicious. If only someone gave us this tip. The guy was not ready for some extra time on the border ðŸ¤£</p>
<p>When we settled in Australia we bought <a href="https://www.ikea.com/au/en/cat/toy-storage-20474/">TROFAST</a> storage solution for toys. Because we had like 9-12 drawers we decided to separate all lego parts by color. Later I found out that this is classic next step for lego owners who reaches a particular size.</p>
<p>Also around that time (~5 years ago) one very generous gentlemen at <a href="https://robodino.org/">Robots And Dinosaurs Sydney hacker space</a> gifted me 8 or 10 of these:
<a href="/blog/images/2020-06-07-about-lego-labels_1.jpg"><img src="/blog/images/small/2020-06-07-about-lego-labels_1.jpg" alt="Craft Cabinet"></a></p>
<p>The problem was all of them were filled with electronics components, that owner didn&#39;t need anyway. For 5 years they were not used, taking space moving from place to place with me because I didn&#39;t have time nor motivation to clean them up and use this storage for something else.</p>
<p>Until now. I spent a couple of weeks packing each drawer content into own bag and moving drawer label on a bag.
<a href="/blog/images/2020-06-07-about-lego-labels_2.jpg"><img src="/blog/images/small/2020-06-07-about-lego-labels_2.jpg" alt="De-labeled Craft Cabinet"></a>
The plan is to use one or two boxes for my own electronics components and other small things in the shop, and the rest of them use for sorting lego.</p>
<h2 id="lego-labels-source">LEGO labels source</h2>
<p>Now, when you have some background you come to the topic of this post: lego labels. Quick googling gave me this wonderful resource: <a href="https://brickarchitect.com/">https://brickarchitect.com/</a> It&#39;s pretty much what I was looking for. It has tons of very concise information on the topic of lego organisation. Author, <a href="https://www.instagram.com/tomalphin/?hl=en">Tom Alphin</a>, even made free labels!  And that&#39;s what we going to talk about here.</p>
<p>On his website Tom encourages lego enthusiasts to buy one of Brother&#39;s label makers (like <a href="https://www.amazon.com/dp/B00OCEKCB2/ref=as_li_ss_tl?ie=UTF8&amp;linkCode=ll1&amp;tag=thebrickarchitect-20&amp;linkId=debb0ec67aff5b7d7d35224d45e34458">this one</a>). Because labels he shares with the worlds are in special file format these Label Makers consume. Unfortunately for me, I already bought a label maker (<a href="https://www.amazon.com.au/gp/product/B076LQ535N/ref=as_li_ss_tl?ie=UTF8&amp;psc=1&amp;linkCode=ll1&amp;tag=soswow-22&amp;linkId=329e5111e440b8b7fef5b058dfde2db6&amp;language=en_AU">cheaper and dumber one</a>) and I didn&#39;t want to spend more money on another one.</p>
<p>Instead, I decided to buy some <a href="https://www.amazon.com.au/gp/product/B07KW4XFPT/ref=as_li_ss_tl?ie=UTF8&amp;psc=1&amp;linkCode=ll1&amp;tag=soswow-22&amp;linkId=31b6bb2ef8e76c3a380763d488ce8324&amp;language=en_AU">Self Adhesive A4 paper</a>, print those labels on my Inkjet printer and cut them out manually. Unfortunately, I didn&#39;t find an easy straight forward way of getting what I wanted.</p>
<p>What Tom <a href="https://brickarchitect.com/labels/#download_lego_brick_labels">provides</a> are two things: </p>
<ul>
<li><code>LEGO_BRICK_LABELS.zip</code> - which is a list of <code>.lbx</code> that you can use with Brother label makers</li>
<li><code>LEGO_BRICK_LABELS-CONTACT_SHEET.pdf</code> - which is a PDF that was crafted manually by Tom with all the labels.</li>
</ul>
<p><a href="/blog/images/2020-06-07-about-lego-labels_4.png"><img src="/blog/images/small/2020-06-07-about-lego-labels_4.jpg" alt="PDF Page sample"></a></p>
<p>Even though <code>.pdf</code> the file seems to be no brainer, there are problems with that. It wasn&#39;t made with a purpose in mind of being printed on self-adhesive paper. Amount of white space all around actual labels will consume an unnecessarily large amount of waste paper material. The other minor problem is the label format. Here is a sample label layout:
<a href="/blog/images/2020-06-07-about-lego-labels_3.png"><img src="/blog/images/small/2020-06-07-about-lego-labels_3.jpg" alt="Default Label Format"></a>
Its design assumes one box/tray contains just one type of part with just one label. My case, on the other hand, is a little bit different. Since I am no <a href="https://en.wikipedia.org/wiki/Ryan_McNaught">Brick Man</a> and don&#39;t have as many parts in my collection, I expect to have more than one type of part in a single tray. There won&#39;t be enough place on the front to place many such labels. So, if I could strip off code number and description keeping only the image, that would be good enough.</p>
<h2 id="extracting-lego-part-images">Extracting Lego Part images</h2>
<p>From Tom&#39;s website:</p>
<blockquote>
<p>The images were created using custom LDraw scripts that optimize the viewing angle and enhance the contrast of each part. The scripts are proprietary and hard to use, and the labels are free for non-commercial use.</p>
</blockquote>
<p>At this point, I am familiar with <a href="https://www.ldraw.org/">LDraw</a>, but since Tom is not sharing any specifics about rendering settings I won&#39;t be able to re-render them myself.</p>
<p>Another approach could be editing PDF in a vector graphics editor, like Inkscape. Which I tried and quickly decided not to continue this path. It was pretty tedious and I wanted to explore other options.</p>
<p><a href="/blog/images/2020-06-07-about-lego-labels_5.png"><img src="/blog/images/small/2020-06-07-about-lego-labels_5.jpg" alt="Default Label Format"></a></p>
<p>I decided to look into <code>.lbx</code> files. This is a format that can be opened with &quot;Brother P-touch Editor&quot;. Which looks like very specialized minimal vector graphics editor for preparing labels. It looks like this:</p>
<p><a href="/blog/images/2020-06-07-about-lego-labels_6.png"><img src="/blog/images/small/2020-06-07-about-lego-labels_6.jpg" alt="Brother P-touch Editor"></a></p>
<p>I was hoping to find some kind of &quot;Export as ...&quot; menu item, but no luck.</p>
<p>Googling more I&#39;ve discovered that <code>.lbx</code> is just a <code>zip</code> file. After unzipping I found a bunch of <code>.bmp</code> files and couple of <code>.xml</code> files. Raster images were what Tom rendered with LDraw. That&#39;s exactly what I need!</p>
<p>In total there are about 200 <code>.lbx</code> files. First I moved them into one place (they were distributed in subfolders). Then, I renamed them to <code>.zip</code> with</p>
<pre><code class="language-bash">for file in *.lbx
    do
        echo mv &quot;$file&quot; &quot;${file/zip./}&quot;
    done</code></pre>
<p><code>unzip *.zip</code> will unzip all the files into the respective folder. The reason individual folders were needed is that each of the archives had images with names like <code>Object0.bmp</code>, <code>Object1.bmp</code>. Next step was to move all image files into one place. The language I know the best is <code>JS</code> so I&#39;ve written a script that would move images while adding prefix of its folder:</p>
<pre><code class="language-typescript">import * as fs from &quot;fs&quot;;
import * as path from &quot;path&quot;;

function walkDir(dir: string, callback: (string) =&gt; void) {
  fs.readdirSync(dir).forEach((f) =&gt; {
    let dirPath = path.join(dir, f);
    let isDirectory = fs.statSync(dirPath).isDirectory();
    isDirectory ? walkDir(dirPath, callback) : callback(path.join(dir, f));
  });
}

walkDir(&quot;./source&quot;, (localPath: string) =&gt; {
  if (localPath.endsWith(&quot;.bmp&quot;)) {
    const prefix = path.basename(path.dirname(localPath));
    const fileName = path.basename(localPath);
    fs.copyFileSync(localPath, `images/${prefix}-${fileName}`);
  }
});</code></pre>
<p>Now, images are extracted
<a href="/blog/images/2020-06-07-about-lego-labels_7.png"><img src="/blog/images/small/2020-06-07-about-lego-labels_7.jpg" alt="Images are ready"></a></p>
<p>Next step is pure magic. Some time ago, while working on a different project I&#39;ve discovered a tool called <a href="http://www.imagemagick.org/Usage/montage/">montage</a> which is part of ImageMagick package. It allows you to compile a bunch of images into one big image. After quite a bit of tinkering I&#39;ve come up with this command line:</p>
<pre><code class="language-bash">montage *.bmp -tile 20x14 -geometry 120x120+10+10 ../all-together-page-%d.jpg</code></pre>
<p>Here is a breakdown:</p>
<ul>
<li><code>*.bmp</code> - take all <code>bmp</code> images in current folder</li>
<li><code>-tile 20x14</code> - I want to have 20 tiles horizontally and 14 vertically in one file</li>
<li><code>-geometry 120x120+10+10</code> - each image needs to be resized (up or down) to 120px by 120px with 10px padding from all sides</li>
<li><code>../all-together-page-%d.jpg</code> - resulting images name using <code>%d</code> is where page number will go</li>
</ul>
<p>Here is a sample of resulting image:
<a href="/blog/images/2020-06-07-about-lego-labels_8.jpg"><img src="/blog/images/small/2020-06-07-about-lego-labels_8.jpg" alt="Resulting image sample"></a></p>
<p>Here are resulting images free for download: <a href="/blog/images/all-together-page-0.jpg">1</a>, <a href="/blog/images/all-together-page-1.jpg">2</a>, <a href="/blog/images/all-together-page-2.jpg">3</a>, <a href="/blog/images/all-together-page-3.jpg">4</a>, <a href="/blog/images/all-together-page-4.jpg">5</a>. Since these images extracted from Tom&#39;s label files I say you can only use these images for noncommercial use because this is what Tom says about label files.</p>
<p>After printing them out and many of days of manual sorting so far I have this:
<a href="/blog/images/2020-06-07-about-lego-labels_9.jpg"><img src="/blog/images/small/2020-06-07-about-lego-labels_9.jpg" alt="Unused labels"></a>
<a href="/blog/images/2020-06-07-about-lego-labels_10.jpg"><img src="/blog/images/small/2020-06-07-about-lego-labels_10.jpg" alt="Two boxes sorted"></a></p>


    Tags:
    
        <a href="/blog/tags#tag-blog">blog</a>
    
        <a href="/blog/tags#tag-lego">lego</a>
    
    <div id="disqus_thread"></div>
    <script>
      /**
       * RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
       * LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables
       */

      var disqus_config = function () {
        this.page.identifier = ""; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
      };

      (function() { // DON'T EDIT BELOW THIS LINE
        var d = document, s = d.createElement('script');

        s.src = '//sasha-github-blog.disqus.com/embed.js';

        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
      })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
</div>

      </div>
    </div>

    <label for="sidebar-checkbox" class="sidebar-toggle"></label>

    <script>
      (function(document) {
        var toggle = document.querySelector('.sidebar-toggle');
        var sidebar = document.querySelector('#sidebar');
        var checkbox = document.querySelector('#sidebar-checkbox');

        document.addEventListener('click', function(e) {
          var target = e.target;

          if(!checkbox.checked ||
             sidebar.contains(target) ||
             (target === checkbox || target === toggle)) return;

          checkbox.checked = false;
        }, false);
      })(document);
    </script>
    <script src="//localhost:35729/livereload.js"></script>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-2354819-12"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-2354819-12');
    </script>
    <script id="dsq-count-scr" src="//sasha-github-blog.disqus.com/count.js" async></script>
  </body>
</html>
